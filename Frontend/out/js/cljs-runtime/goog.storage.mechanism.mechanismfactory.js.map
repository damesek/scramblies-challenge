{
"version":3,
"file":"goog.storage.mechanism.mechanismfactory.js",
"lineCount":32,
"mappings":"AAWAA,IAAKC,CAAAA,OAAL,CAAa,yCAAb,CAAA;AAEAD,IAAKE,CAAAA,OAAL,CAAa,0CAAb,CAAA;AACAF,IAAKE,CAAAA,OAAL,CAAa,4CAAb,CAAA;AACAF,IAAKE,CAAAA,OAAL,CAAa,mCAAb,CAAA;AACAF,IAAKE,CAAAA,OAAL,CAAa,0CAAb,CAAA;AACAF,IAAKG,CAAAA,WAAL,CAAiB,0CAAjB,CAAA;AAOAH,IAAKI,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,gBAAiBC,CAAAA,oBAAxC,GACI,qBADJ;AAcAP,IAAKI,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,gBAAiBE,CAAAA,MAAxC,GAAiDC,QAAQ,CAACC,aAAD,CAAgB;AAEvE,SAAOV,IAAKI,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,gBAAiBK,CAAAA,uBAAxC,CACID,aADJ,CAAP,IAEIV,IAAKI,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,gBAAiBM,CAAAA,gBAAxC,CAAyDF,aAAzD,CAFJ;AAFuE,CAAzE;AAkBAV,IAAKI,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,gBAAiBK,CAAAA,uBAAxC,GAAkEE,QAAQ,CACtEH,aADsE,CACvD;AAEjB,MAAIN,UAAU,IAAIJ,IAAKI,CAAAA,OAAQC,CAAAA,SAAUS,CAAAA,iBAA3B,EAAd;AACA,MAAIV,OAAQW,CAAAA,WAAR,EAAJ;AACE,WAAOL,aAAA,GACH,IAAIV,IAAKI,CAAAA,OAAQC,CAAAA,SAAUW,CAAAA,iBAA3B,CAA6CZ,OAA7C,EAAsDM,aAAtD,CADG,GAEHN,OAFJ;AADF;AAKA,SAAO,IAAP;AARiB,CADnB;AAuBAJ,IAAKI,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,gBAAiBW,CAAAA,yBAAxC,GAAoEC,QAAQ,CACxER,aADwE,CACzD;AAEjB,MAAIN,UAAU,IAAIJ,IAAKI,CAAAA,OAAQC,CAAAA,SAAUc,CAAAA,mBAA3B,EAAd;AACA,MAAIf,OAAQW,CAAAA,WAAR,EAAJ;AACE,WAAOL,aAAA,GACH,IAAIV,IAAKI,CAAAA,OAAQC,CAAAA,SAAUW,CAAAA,iBAA3B,CAA6CZ,OAA7C,EAAsDM,aAAtD,CADG,GAEHN,OAFJ;AADF;AAKA,SAAO,IAAP;AARiB,CADnB;AAqBAJ,IAAKI,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,gBAAiBM,CAAAA,gBAAxC,GAA2DQ,QAAQ,CAC/DV,aAD+D,CAChD;AAEjB,MAAIN,UAAU,IAAIJ,IAAKI,CAAAA,OAAQC,CAAAA,SAAUgB,CAAAA,UAA3B,CACVX,aADU,IAEVV,IAAKI,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,gBAAiBC,CAAAA,oBAF9B,CAAd;AAGA,MAAIH,OAAQW,CAAAA,WAAR,EAAJ;AACE,WAAOX,OAAP;AADF;AAGA,SAAO,IAAP;AARiB,CADnB;;",
"sources":["goog/storage/mechanism/mechanismfactory.js"],
"sourcesContent":["/**\n * @license\n * Copyright The Closure Library Authors.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Provides factory methods for selecting the best storage\n * mechanism, depending on availability and needs.\n */\n\ngoog.provide('goog.storage.mechanism.mechanismfactory');\n\ngoog.require('goog.storage.mechanism.HTML5LocalStorage');\ngoog.require('goog.storage.mechanism.HTML5SessionStorage');\ngoog.require('goog.storage.mechanism.IEUserData');\ngoog.require('goog.storage.mechanism.PrefixedMechanism');\ngoog.requireType('goog.storage.mechanism.IterableMechanism');\n\n\n/**\n * The key to shared userData storage.\n * @type {string}\n */\ngoog.storage.mechanism.mechanismfactory.USER_DATA_SHARED_KEY =\n    'UserDataSharedStore';\n\n\n/**\n * Returns the best local storage mechanism, or null if unavailable.\n * Local storage means that the database is placed on user's computer.\n * The key-value database is normally shared between all the code paths\n * that request it, so using an optional namespace is recommended. This\n * provides separation and makes key collisions unlikely.\n *\n * @param {string=} opt_namespace Restricts the visibility to given namespace.\n * @return {goog.storage.mechanism.IterableMechanism} Created mechanism or null.\n */\ngoog.storage.mechanism.mechanismfactory.create = function(opt_namespace) {\n  'use strict';\n  return goog.storage.mechanism.mechanismfactory.createHTML5LocalStorage(\n             opt_namespace) ||\n      goog.storage.mechanism.mechanismfactory.createIEUserData(opt_namespace);\n};\n\n\n/**\n * Returns an HTML5 local storage mechanism, or null if unavailable.\n * Since the HTML5 local storage does not support namespaces natively,\n * and the key-value database is shared between all the code paths\n * that request it, it is recommended that an optional namespace is\n * used to provide key separation employing a prefix.\n *\n * @param {string=} opt_namespace Restricts the visibility to given namespace.\n * @return {goog.storage.mechanism.IterableMechanism} Created mechanism or null.\n */\ngoog.storage.mechanism.mechanismfactory.createHTML5LocalStorage = function(\n    opt_namespace) {\n  'use strict';\n  var storage = new goog.storage.mechanism.HTML5LocalStorage();\n  if (storage.isAvailable()) {\n    return opt_namespace ?\n        new goog.storage.mechanism.PrefixedMechanism(storage, opt_namespace) :\n        storage;\n  }\n  return null;\n};\n\n\n/**\n * Returns an HTML5 session storage mechanism, or null if unavailable.\n * Since the HTML5 session storage does not support namespaces natively,\n * and the key-value database is shared between all the code paths\n * that request it, it is recommended that an optional namespace is\n * used to provide key separation employing a prefix.\n *\n * @param {string=} opt_namespace Restricts the visibility to given namespace.\n * @return {goog.storage.mechanism.IterableMechanism} Created mechanism or null.\n */\ngoog.storage.mechanism.mechanismfactory.createHTML5SessionStorage = function(\n    opt_namespace) {\n  'use strict';\n  var storage = new goog.storage.mechanism.HTML5SessionStorage();\n  if (storage.isAvailable()) {\n    return opt_namespace ?\n        new goog.storage.mechanism.PrefixedMechanism(storage, opt_namespace) :\n        storage;\n  }\n  return null;\n};\n\n\n/**\n * Returns an IE userData local storage mechanism, or null if unavailable.\n * Using an optional namespace is recommended to provide separation and\n * avoid key collisions.\n *\n * @param {string=} opt_namespace Restricts the visibility to given namespace.\n * @return {goog.storage.mechanism.IterableMechanism} Created mechanism or null.\n */\ngoog.storage.mechanism.mechanismfactory.createIEUserData = function(\n    opt_namespace) {\n  'use strict';\n  var storage = new goog.storage.mechanism.IEUserData(\n      opt_namespace ||\n      goog.storage.mechanism.mechanismfactory.USER_DATA_SHARED_KEY);\n  if (storage.isAvailable()) {\n    return storage;\n  }\n  return null;\n};\n"],
"names":["goog","provide","require","requireType","storage","mechanism","mechanismfactory","USER_DATA_SHARED_KEY","create","goog.storage.mechanism.mechanismfactory.create","opt_namespace","createHTML5LocalStorage","createIEUserData","goog.storage.mechanism.mechanismfactory.createHTML5LocalStorage","HTML5LocalStorage","isAvailable","PrefixedMechanism","createHTML5SessionStorage","goog.storage.mechanism.mechanismfactory.createHTML5SessionStorage","HTML5SessionStorage","goog.storage.mechanism.mechanismfactory.createIEUserData","IEUserData"]
}

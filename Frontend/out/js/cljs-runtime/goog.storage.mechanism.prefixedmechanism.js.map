{
"version":3,
"file":"goog.storage.mechanism.prefixedmechanism.js",
"lineCount":32,
"mappings":"AAWAA,IAAKC,CAAAA,OAAL,CAAa,0CAAb,CAAA;AAEAD,IAAKE,CAAAA,OAAL,CAAa,oBAAb,CAAA;AACAF,IAAKE,CAAAA,OAAL,CAAa,0CAAb,CAAA;AAeAF,IAAKG,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,iBAAvB,GAA2CC,QAAQ,CAACF,SAAD,EAAYG,MAAZ,CAAoB;AAErEP,MAAKG,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,iBAAkBG,CAAAA,IAAzC,CAA8C,IAA9C,EAAoD,aAApD,CAAA;AAMA,MAAKC,CAAAA,UAAL,GAAkBL,SAAlB;AAOA,MAAKM,CAAAA,OAAL,GAAeH,MAAf,GAAwB,IAAxB;AAfqE,CAAvE;AAiBAP,IAAKW,CAAAA,QAAL,CACIX,IAAKG,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,iBAD3B,EAEIL,IAAKG,CAAAA,OAAQC,CAAAA,SAAUQ,CAAAA,iBAF3B,CAAA;AAMAZ,IAAKG,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,iBAAkBQ,CAAAA,SAAUC,CAAAA,GAAnD,GAAyDC,QAAQ,CAACC,GAAD,EAAMC,KAAN,CAAa;AAE5E,MAAKR,CAAAA,UAAWK,CAAAA,GAAhB,CAAoB,IAAKJ,CAAAA,OAAzB,GAAmCM,GAAnC,EAAwCC,KAAxC,CAAA;AAF4E,CAA9E;AAOAjB,IAAKG,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,iBAAkBQ,CAAAA,SAAUK,CAAAA,GAAnD,GAAyDC,QAAQ,CAACH,GAAD,CAAM;AAErE,SAAO,IAAKP,CAAAA,UAAWS,CAAAA,GAAhB,CAAoB,IAAKR,CAAAA,OAAzB,GAAmCM,GAAnC,CAAP;AAFqE,CAAvE;AAOAhB,IAAKG,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,iBAAkBQ,CAAAA,SAAUO,CAAAA,MAAnD,GAA4DC,QAAQ,CAACL,GAAD,CAAM;AAExE,MAAKP,CAAAA,UAAWW,CAAAA,MAAhB,CAAuB,IAAKV,CAAAA,OAA5B,GAAsCM,GAAtC,CAAA;AAFwE,CAA1E;AAOAhB,IAAKG,CAAAA,OAAQC,CAAAA,SAAUC,CAAAA,iBAAkBQ,CAAAA,SAAUS,CAAAA,YAAnD,GAAkEC,QAAQ,CACtEC,QADsE,CAC5D;AAEZ,MAAIC,UAAU,IAAKhB,CAAAA,UAAWa,CAAAA,YAAhB,CAA6B,IAA7B,CAAd;AACA,MAAII,UAAU,IAAd;AACA,MAAIC,UAAU,IAAI3B,IAAK4B,CAAAA,IAAKC,CAAAA,QAAd,EAAd;AACAF,SAAQG,CAAAA,gBAAR,GAA2BC,QAAQ,EAAG;AAEpC,QAAIf,MAA6BS,OAAQK,CAAAA,gBAAR,EAAjC;AACA,WAAOd,GAAIgB,CAAAA,MAAJ,CAAW,CAAX,EAAcN,OAAQhB,CAAAA,OAAQuB,CAAAA,MAA9B,CAAP,IAAgDP,OAAQhB,CAAAA,OAAxD;AACEM,SAAA,GAA6BS,OAAQK,CAAAA,gBAAR,EAA7B;AADF;AAGA,WAAON,QAAA,GAAWR,GAAIgB,CAAAA,MAAJ,CAAWN,OAAQhB,CAAAA,OAAQuB,CAAAA,MAA3B,CAAX,GACWP,OAAQjB,CAAAA,UAAWS,CAAAA,GAAnB,CAAuBF,GAAvB,CADlB;AANoC,GAAtC;AAUA,SAAOW,OAAP;AAfY,CADd;;",
"sources":["goog/storage/mechanism/prefixedmechanism.js"],
"sourcesContent":["/**\n * @license\n * Copyright The Closure Library Authors.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * @fileoverview Wraps an iterable storage mechanism and creates artificial\n * namespaces using a prefix in the global namespace.\n */\n\ngoog.provide('goog.storage.mechanism.PrefixedMechanism');\n\ngoog.require('goog.iter.Iterator');\ngoog.require('goog.storage.mechanism.IterableMechanism');\n\n\n\n/**\n * Wraps an iterable storage mechanism and creates artificial namespaces.\n *\n * @param {!goog.storage.mechanism.IterableMechanism} mechanism Underlying\n *     iterable storage mechanism.\n * @param {string} prefix Prefix for creating an artificial namespace.\n * @constructor\n * @struct\n * @extends {goog.storage.mechanism.IterableMechanism}\n * @final\n */\ngoog.storage.mechanism.PrefixedMechanism = function(mechanism, prefix) {\n  'use strict';\n  goog.storage.mechanism.PrefixedMechanism.base(this, 'constructor');\n  /**\n   * The mechanism to be prefixed.\n   *\n   * @private {goog.storage.mechanism.IterableMechanism}\n   */\n  this.mechanism_ = mechanism;\n\n  /**\n   * The prefix for creating artificial namespaces.\n   *\n   * @private {string}\n   */\n  this.prefix_ = prefix + '::';\n};\ngoog.inherits(\n    goog.storage.mechanism.PrefixedMechanism,\n    goog.storage.mechanism.IterableMechanism);\n\n\n/** @override */\ngoog.storage.mechanism.PrefixedMechanism.prototype.set = function(key, value) {\n  'use strict';\n  this.mechanism_.set(this.prefix_ + key, value);\n};\n\n\n/** @override */\ngoog.storage.mechanism.PrefixedMechanism.prototype.get = function(key) {\n  'use strict';\n  return this.mechanism_.get(this.prefix_ + key);\n};\n\n\n/** @override */\ngoog.storage.mechanism.PrefixedMechanism.prototype.remove = function(key) {\n  'use strict';\n  this.mechanism_.remove(this.prefix_ + key);\n};\n\n\n/** @override */\ngoog.storage.mechanism.PrefixedMechanism.prototype.__iterator__ = function(\n    opt_keys) {\n  'use strict';\n  var subIter = this.mechanism_.__iterator__(true);\n  var selfObj = this;\n  var newIter = new goog.iter.Iterator();\n  newIter.nextValueOrThrow = function() {\n    'use strict';\n    var key = /** @type {string} */ (subIter.nextValueOrThrow());\n    while (key.substr(0, selfObj.prefix_.length) != selfObj.prefix_) {\n      key = /** @type {string} */ (subIter.nextValueOrThrow());\n    }\n    return opt_keys ? key.substr(selfObj.prefix_.length) :\n                      selfObj.mechanism_.get(key);\n  };\n\n  return newIter;\n};\n"],
"names":["goog","provide","require","storage","mechanism","PrefixedMechanism","goog.storage.mechanism.PrefixedMechanism","prefix","base","mechanism_","prefix_","inherits","IterableMechanism","prototype","set","goog.storage.mechanism.PrefixedMechanism.prototype.set","key","value","get","goog.storage.mechanism.PrefixedMechanism.prototype.get","remove","goog.storage.mechanism.PrefixedMechanism.prototype.remove","__iterator__","goog.storage.mechanism.PrefixedMechanism.prototype.__iterator__","opt_keys","subIter","selfObj","newIter","iter","Iterator","nextValueOrThrow","newIter.nextValueOrThrow","substr","length"]
}
